# Model / loading
MODEL_DEVICE=auto
MODELS=Qwen/Qwen3-4B-Instruct-2507
AUTO_DOWNLOAD_MODELS=1
# MODEL_CONFIG can override configs/model_config.yaml if needed

# Concurrency / queues (global)
MAX_CONCURRENT=1
MAX_QUEUE_SIZE=128
QUEUE_TIMEOUT_SEC=2.0

# Embeddings
ENABLE_BATCHING=1
BATCH_WINDOW_MS=4
BATCH_WINDOW_MAX_SIZE=16
EMBEDDING_BATCH_QUEUE_SIZE=64
EMBEDDING_BATCH_QUEUE_TIMEOUT_SEC=2.0
EMBEDDING_MAX_WORKERS=1
EMBEDDING_COUNT_MAX_WORKERS=1
EMBEDDING_CACHE_SIZE=256
EMBEDDING_GENERATE_TIMEOUT_SEC=60

# Chat (text / multimodal)
ENABLE_CHAT_BATCHING=1
CHAT_BATCH_ALLOW_VISION=0
CHAT_BATCH_WINDOW_MS=10
CHAT_BATCH_MAX_SIZE=1
CHAT_BATCH_QUEUE_SIZE=64
CHAT_MAX_PROMPT_TOKENS=4096
CHAT_MAX_NEW_TOKENS=2048
CHAT_GENERATE_TIMEOUT_SEC=60
CHAT_PREPARE_TIMEOUT_SEC=10
CHAT_QUEUE_MAX_WAIT_MS=2000
CHAT_REQUEUE_RETRIES=3
CHAT_REQUEUE_BASE_DELAY_MS=5
CHAT_REQUEUE_MAX_DELAY_MS=100
CHAT_REQUEUE_MAX_WAIT_MS=2000
CHAT_REQUEUE_MAX_TASKS=64
CHAT_COUNT_MAX_WORKERS=1
CHAT_COUNT_USE_CHAT_EXECUTOR=0

# Audio (Whisper)
AUDIO_MAX_CONCURRENT=1
AUDIO_MAX_QUEUE_SIZE=64
AUDIO_QUEUE_TIMEOUT_SEC=2.0
AUDIO_MAX_WORKERS=1
AUDIO_PROCESS_TIMEOUT_SEC=180
MAX_AUDIO_BYTES=26214400

# Vision / remote images (Qwen VL)
ALLOW_REMOTE_IMAGES=0
REMOTE_IMAGE_TIMEOUT=5
MAX_REMOTE_IMAGE_BYTES=5242880
REMOTE_IMAGE_HOST_ALLOWLIST=
REMOTE_IMAGE_MIME_ALLOWLIST=image/png,image/jpeg,image/webp,image/gif

# Request guards (shared)
MAX_BATCH_SIZE=32
MAX_TEXT_CHARS=20000
MAX_NEW_TOKENS=512

# Metrics
ENABLE_METRICS=1

# Warmup
ENABLE_WARMUP=1
WARMUP_BATCH_SIZE=8
WARMUP_STEPS=2
WARMUP_INFERENCE_MODE=1
WARMUP_VRAM_BUDGET_MB=0
WARMUP_VRAM_PER_WORKER_MB=1024
WARMUP_ALLOWLIST=
WARMUP_SKIPLIST=
REQUIRE_WARMUP_SUCCESS=1

